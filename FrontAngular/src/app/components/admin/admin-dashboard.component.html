<div class="admin-dashboard">
  <!-- Sidebar -->
  <div class="sidebar">
    <div class="sidebar-header">
      <h2>Panel Admin</h2>
      <div class="admin-profile">
        <div class="admin-avatar">A</div>
        <div class="admin-info">
          <p class="admin-name">Admin</p>
          <p class="admin-role">Administrador</p>
        </div>
      </div>
    </div>
    
    <nav class="sidebar-nav">
      <button 
        class="nav-item" 
        [class.active]="activeSection === 'dashboard'"
        (click)="setActiveSection('dashboard')"
      >
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <rect x="3" y="3" width="7" height="7"></rect>
          <rect x="14" y="3" width="7" height="7"></rect>
          <rect x="14" y="14" width="7" height="7"></rect>
          <rect x="3" y="14" width="7" height="7"></rect>
        </svg>
        Dashboard
      </button>
      
      <button 
        class="nav-item" 
        [class.active]="activeSection === 'products'"
        (click)="setActiveSection('products')"
      >
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M3 3h18v18H3z"></path>
          <path d="M12 8v8"></path>
          <path d="M8 12h8"></path>
        </svg>
        Productos
      </button>
      
      <button 
        class="nav-item" 
        [class.active]="activeSection === 'categories'"
        (click)="setActiveSection('categories')"
      >
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M3 6h18"></path>
          <path d="M3 12h18"></path>
          <path d="M3 18h18"></path>
        </svg>
        Categorías
      </button>
      
      <button 
        class="nav-item" 
        [class.active]="activeSection === 'users'"
        (click)="setActiveSection('users')"
      >
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
          <circle cx="9" cy="7" r="4"></circle>
          <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
          <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
        </svg>
        Usuarios
      </button>
      
      <button 
        class="nav-item" 
        [class.active]="activeSection === 'orders'"
        (click)="setActiveSection('orders')"
      >
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path>
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <path d="M16 10a4 4 0 0 1-8 0"></path>
        </svg>
        Pedidos
      </button>
      
      <button 
        class="nav-item" 
        [class.active]="activeSection === 'settings'"
        (click)="setActiveSection('settings')"
      >
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="3"></circle>
          <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
        </svg>
        Configuración
      </button>
    </nav>
    
    <div class="sidebar-footer">
      <button class="logout-btn" (click)="logout()">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
          <polyline points="16 17 21 12 16 7"></polyline>
          <line x1="21" y1="12" x2="9" y2="12"></line>
        </svg>
        Cerrar Sesión
      </button>
    </div>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <!-- Loading Indicator -->
    <div *ngIf="isLoading" class="loading-overlay">
      <div class="spinner"></div>
      <p>Cargando...</p>
    </div>
    
    <!-- Error Message -->
    <div *ngIf="error" class="error-message">
      <p>{{ error }}</p>
      <button (click)="error = null">Cerrar</button>
    </div>
    
    <!-- Dashboard Section -->
    <div *ngIf="activeSection === 'dashboard'" class="dashboard-section">
      <h1>Dashboard</h1>
      
      <!-- Stats Cards -->
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon orders-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path>
              <line x1="3" y1="6" x2="21" y2="6"></line>
              <path d="M16 10a4 4 0 0 1-8 0"></path>
            </svg>
          </div>
          <div class="stat-info">
            <h3>Pedidos Pendientes Totales</h3>
            <p class="stat-value">{{ stats.totalPendingCarts }}</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon orders-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path>
              <line x1="3" y1="6" x2="21" y2="6"></line>
              <path d="M16 10a4 4 0 0 1-8 0"></path>
            </svg>
          </div>
          <div class="stat-info">
            <h3>Pedidos Completados Totales</h3>
            <p class="stat-value">{{ stats.totalCompletedCarts }}</p>
          </div>
        </div>
        
        <div class="stat-card">
          <div class="stat-icon revenue-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="12" y1="1" x2="12" y2="23"></line>
              <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
            </svg>
          </div>
          <div class="stat-info">
            <h3>Ingresos Totales</h3>
            <p class="stat-value">${{ stats.totalRevenue }}</p>
          </div>
        </div>
        
        <div class="stat-card">
          <div class="stat-icon products-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M3 3h18v18H3z"></path>
              <path d="M12 8v8"></path>
              <path d="M8 12h8"></path>
            </svg>
          </div>
          <div class="stat-info">
            <h3>Productos</h3>
            <p class="stat-value">{{ stats.totalProducts }}</p>
          </div>
        </div>
        
        <div class="stat-card">
          <div class="stat-icon users-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
              <circle cx="9" cy="7" r="4"></circle>
              <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
              <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
            </svg>
          </div>
          <div class="stat-info">
            <h3>Usuarios</h3>
            <p class="stat-value">{{ stats.totalUsers }}</p>
          </div>
        </div>
      </div>
      
      <!-- Sales Chart -->
      <div class="chart-container">
        <h2>Ventas de la Semana</h2>
        <div class="sales-chart">
          <!-- Aquí iría el componente de gráfico -->
          <div class="chart-placeholder">
            <div *ngFor="let value of salesChart.data; let i = index" class="chart-bar" [style.height.%]="value / 40">
              <span class="bar-value">${{ value }}</span>
            </div>
          </div>
          <div class="chart-labels">
            <span *ngFor="let label of salesChart.labels">{{ label }}</span>
          </div>
        </div>
      </div>
      
      <!-- Recent Orders -->
      <div class="recent-orders">
        <h2>Pedidos Recientes</h2>
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>ID</th>
                <th>Cliente</th>
                <th>Fecha</th>
                <th>Total</th>
                <th>Estado</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let order of filteredCarts.slice(0, 5)">
                <td>{{ order.id }}</td>
                <td>{{ getUserFullName(order.user) }}</td>
                <td>{{ order.createdAt | date:'dd/MM/yyyy HH:mm' }}</td>
                <td>${{ order.total }}</td>
                <td>
                  <span class="status-badge" [class]="order.state">
                    {{ order.state }}
                  </span>
                </td>
              </tr>
              <tr *ngIf="filteredCarts.length === 0">
                <td colspan="5" class="no-data">No hay pedidos recientes</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    
    <!-- Products Section -->
    <div *ngIf="activeSection === 'products'" class="products-section">
      <h1>Gestión de Productos</h1>
      
      <div class="section-actions">
        <div class="search-box">
          <input 
            type="text" 
            placeholder="Buscar productos..." 
            [(ngModel)]="productSearchTerm"
            (input)="filterProducts()"
          >
        </div>
        
        <button class="add-btn" data-bs-toggle="modal" data-bs-target="#addProductModal">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 5v14M5 12h14"></path>
          </svg>
          Nuevo Producto
        </button>
      </div>
      
      <div class="table-container">
        <table>
          <thead>
            <tr>
              <th>Imagen</th>
              <th>Nombre</th>
              <th>Categoría</th>
              <th>Precio</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let product of filteredProducts">
              <td>
                <img [src]="product.imageUrl" [alt]="product.name" class="product-thumbnail">
              </td>
              <td>{{ product.name }}</td>
              <td>{{ product.category?.name }}</td>
              <td>${{ product.price }}</td>
              <td class="actions-cell">
                <button class="edit-btn" title="Editar" (click)="openEditModal(product)" >
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                  </svg>
                </button>
                <button class="delete-btn" title="Eliminar" (click)="deleteProduct(product.id)">
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                    <line x1="10" y1="11" x2="10" y2="17"></line>
                    <line x1="14" y1="11" x2="14" y2="17"></line>
                  </svg>
                </button>
              </td>
            </tr>
            <tr *ngIf="filteredProducts.length === 0">
              <td colspan="5" class="no-data">No se encontraron productos</td>
            </tr>
          </tbody>
        </table>
      </div>
      
    <!-- Add Product Modal -->
      <div class="modal fade" id="addProductModal" tabindex="-1" aria-labelledby="addProductModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <form #productForm="ngForm">
              <div class="modal-header">
                <h5 class="modal-title" id="addProductModalLabel">Nuevo Producto</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <div class="mb-3">
                  <label for="productName" class="form-label">Nombre</label>
                  <input type="text" class="form-control" id="productName" [(ngModel)]="newProduct.name" name="name" required>
                </div>
                <div class="mb-3">
                  <label for="productPrice" class="form-label">Precio</label>
                  <input type="number" class="form-control" id="productPrice" [(ngModel)]="newProduct.price" name="price" required>
                </div>
                <div class="mb-3">
                  <label for="productStock" class="form-label">Stock</label>
                  <input type="number" class="form-control" id="productStock" [(ngModel)]="newProduct.stock" name="stock" required>
                </div>
                <div class="mb-3">
                  <label for="productCategory" class="form-label">Categoría</label>
                  <select class="form-select" id="productCategory" [(ngModel)]="newProduct.category.id" name="categoryId" required>
                    <option value="" disabled selected>Seleccionar categoría</option>
                    <option *ngFor="let category of categories" [value]="category.id">{{ category.name }}</option>
                  </select>
                </div>
                <div class="mb-3">
                  <label for="productImage" class="form-label">URL de Imagen</label>
                  <input type="text" class="form-control" id="productImage" [(ngModel)]="newProduct.imageUrl" name="imageUrl">
                </div>
                <div class="mb-3">
                  <label for="productDescription" class="form-label">Descripción</label>
                  <textarea class="form-control" id="productDescription" rows="3" [(ngModel)]="newProduct.description" name="description"></textarea>
                </div>
                <div class="mb-3">
                  <label for="productState" class="form-label">Estado</label>
                  <select class="form-select" id="productState" [(ngModel)]="newProduct.state" name="state" required>
                    <option value="" disabled selected>Seleccionar estado</option>
                    <option [value]="'Active'">Activo</option>
                    <option [value]="'Archived'">Archivado</option>
                  </select>
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-primary" (click)="productForm.valid && createProduct()">Guardar</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
    <!-- Edit Product Modal -->
      <div class="modal fade" id="editProductModal" tabindex="-1" aria-labelledby="editProductModalLabel" aria-hidden="true" [class.show]="showEditModal" [style.display]="showEditModal ? 'block' : 'none'">
    <div class="modal-dialog">
      <div class="modal-content">
        <form #editProductForm="ngForm">
          <div class="modal-header">
            <h5 class="modal-title" id="editProductModalLabel">Editar Producto</h5>
            <button type="button" class="btn-close" aria-label="Close" (click)="closeEditModal()"></button>
          </div>
          <div class="modal-body">
            <div class="mb-3">
              <label for="editProductName" class="form-label">Nombre</label>
              <input type="text" class="form-control" id="editProductName" [(ngModel)]="editingProduct.name" name="name" required />
            </div>
            <div class="mb-3">
              <label for="editProductPrice" class="form-label">Precio</label>
              <input type="number" class="form-control" id="editProductPrice" [(ngModel)]="editingProduct.price" name="price" required />
            </div>
            <div class="mb-3">
              <label for="editProductStock" class="form-label">Stock</label>
              <input type="number" class="form-control" id="editProductStock" [(ngModel)]="editingProduct.stock" name="stock" required />
            </div>

            <div class="mb-3">
              <label for="editProductImage" class="form-label">URL de Imagen</label>
              <input type="text" class="form-control" id="editProductImage" [(ngModel)]="editingProduct.imageUrl" name="imageUrl" />
            </div>
            <div class="mb-3">
              <label for="editProductDescription" class="form-label">Descripción</label>
              <textarea class="form-control" id="editProductDescription" rows="3" [(ngModel)]="editingProduct.description" name="description"></textarea>
            </div>
            <div class="mb-3">
              <label for="editProductState" class="form-label">Estado</label>
              <select class="form-select" id="editProductState" [(ngModel)]="editingProduct.state" name="state" required>
                <option [value]="'Active'">Activo</option>
                <option [value]="'Archived'">Archivado</option>
              </select>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" (click)="closeEditModal()">Cancelar</button>
            <button type="button" class="btn btn-primary" [disabled]="!editProductForm.valid" (click)="updateProduct()">Guardar Cambios</button>
          </div>
        </form>
      </div>
    </div>
    </div>


    <!-- Categories Section -->
    <div *ngIf="activeSection === 'categories'" class="categories-section">
      <h1>Gestión de Categorías</h1>
      
      <div class="section-actions">
        <button class="add-btn" data-bs-toggle="modal" data-bs-target="#addCategoryModal">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 5v14M5 12h14"></path>
          </svg>
          Nueva Categoría
        </button>
      </div>
      
      <div class="categories-grid">
        <div *ngFor="let category of categories" class="category-card">
          <h3>{{ category.name }}</h3>
          <div class="category-actions">
            <button class="edit-btn" title="Editar" (click)="openEditCategoryModal(category)" data-bs-toggle="modal"
        data-bs-target="#editCategoryModal">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
              </svg>
            </button>
            <button class="delete-btn" title="Eliminar" (click)="deleteCategory(category.id)">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                <line x1="10" y1="11" x2="10" y2="17"></line>
                <line x1="14" y1="11" x2="14" y2="17"></line>
              </svg>
            </button>
          </div>
        </div>
        
        <div *ngIf="categories.length === 0" class="no-data-card">
          No hay categorías disponibles
        </div>
      </div>
      
      <!-- Add Category Modal -->
      <div class="modal fade" id="addCategoryModal" tabindex="-1" aria-labelledby="addCategoryModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="addCategoryModalLabel">Nueva Categoría</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <form>
                <div class="mb-3">
                  <label for="categoryName" class="form-label">Nombre</label>
                  <input type="text" class="form-control" id="categoryName" [(ngModel)]="newCategory.name" name="name" required>
                </div>
              </form>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
              <button type="button" class="btn btn-primary" (click)="createCategory()">Guardar</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Modal Editar Categoría -->
<div class="modal fade" id="editCategoryModal" tabindex="-1" aria-labelledby="editCategoryModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      
      <div class="modal-header">
        <h5 class="modal-title" id="editCategoryModalLabel">Editar Categoría</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
      </div>

      <div class="modal-body">
        <form (ngSubmit)="updateCategory()" #editCategoryForm="ngForm">
          <div class="mb-3">
            <label for="categoryName" class="form-label">Nombre</label>
            <input 
              type="text" 
              id="categoryName" 
              class="form-control" 
              [(ngModel)]="selectedCategory.name" 
              name="name" 
              required
            >
          </div>
        </form>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button type="submit" class="btn btn-primary" (click)="updateCategory()" [disabled]="!editCategoryForm.valid">
          Guardar cambios
        </button>
      </div>

    </div>
  </div>
</div>

    <!-- Users Section -->
    <div *ngIf="activeSection === 'users'" class="users-section">
      <h1>Gestión de Usuarios</h1>
      
      <div class="section-actions">
        <div class="search-box">
          <input 
            type="text" 
            placeholder="Buscar usuarios..." 
            [(ngModel)]="userSearchTerm"
            (input)="filterUsers()"
          >
        </div>
        
        <div class="filter-dropdown">
          <select [(ngModel)]="userTypeFilter" (change)="filterUsers()">
            <option value="all">Todos los tipos</option>
            <option value="Admin">Administradores</option>
            <option value="Mozo">Mozos</option>
            <option value="Client">Clientes</option>
          </select>
        </div>
        
        <button class="add-btn" data-bs-toggle="modal" data-bs-target="#addUserModal">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 5v14M5 12h14"></path>
          </svg>
          Nuevo Usuario
        </button>
      </div>
      
      <div class="table-container">
        <table>
          <thead>
            <tr>
              <th>Nombre</th>
              <th>DNI</th>
              <th>Tipo</th>
              <th>Fecha Registro</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let user of filteredUsers">
              <td>{{ getUserFullName(user) }}</td>
              <td>{{ user.dni }}</td>
              <td>
                <span class="role-badge" [class]="user.userType">
                  {{ user.userType }}
                </span>
              </td>
              <td>{{ user.createdAt | date:'dd/MM/yyyy' }}</td>
              <td class="actions-cell">
                <button class="edit-btn" title="Editar" (click)="updateUser(user)" data-bs-toggle="modal" data-bs-target="#editUserModal">
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                  </svg>
                </button>
                <button class="delete-btn" title="Eliminar" (click)="deleteUser(user.id)">
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                    <line x1="10" y1="11" x2="10" y2="17"></line>
                    <line x1="14" y1="11" x2="14" y2="17"></line>
                  </svg>
                </button>
              </td>
            </tr>
            <tr *ngIf="filteredUsers.length === 0">
              <td colspan="5" class="no-data">No se encontraron usuarios</td>
            </tr>
          </tbody>
        </table>
      </div>
      
      <!-- Add User Modal -->
      <div class="modal fade" id="addUserModal" tabindex="-1" aria-labelledby="addUserModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="addUserModalLabel">Nuevo Usuario</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <form>
                <div class="mb-3">
                  <label for="userFirstName" class="form-label">Nombre</label>
                  <input type="text" class="form-control" id="userFirstName" [(ngModel)]="newUser.firstName" name="firstName" required>
                </div>
                <div class="mb-3">
                  <label for="userLastName" class="form-label">Apellido</label>
                  <input type="text" class="form-control" id="userLastName" [(ngModel)]="newUser.lastName" name="lastName" required>
                </div>
                <div class="mb-3">
                  <label for="userDni" class="form-label">DNI</label>
                  <input type="text" class="form-control" id="userDni" [(ngModel)]="newUser.dni" name="dni" required>
                </div>
                <div class="mb-3">
                  <label for="userEmail" class="form-label">Email</label>
                  <input type="email" class="form-control" id="userEmail" [(ngModel)]="newUser.email" name="email" required>
                </div>
                <div class="mb-3">
                  <label for="userType" class="form-label">Tipo de Usuario</label>
                  <select class="form-select" id="userType" [(ngModel)]="newUser.userType" name="userType" required>
                    <option value="Client">Cliente</option>
                    <option value="Mozo">Mozo</option>
                    <option value="Admin">Administrador</option>
                  </select>
                </div>
                <div class="mb-3">
                  <label for="userPassword" class="form-label">Contraseña</label>
                  <input type="password" class="form-control" id="userPassword" [(ngModel)]="newUser.password" name="password" required>
                </div>
              </form>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
              <button type="button" class="btn btn-primary" (click)="createUser()">Guardar</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    
<!-- Edit User Modal -->
<div class="modal fade" id="editUserModal" tabindex="-1" aria-labelledby="editUserModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="editUserModalLabel">Editar Usuario</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form>
          <div class="mb-3">
            <label for="editUserFirstName" class="form-label">Nombre</label>
            <input type="text" class="form-control" id="editUserFirstName" [(ngModel)]="selectedUser.firstName" name="editFirstName" required>
          </div>
          <div class="mb-3">
            <label for="editUserLastName" class="form-label">Apellido</label>
            <input type="text" class="form-control" id="editUserLastName" [(ngModel)]="selectedUser.lastName" name="editLastName" required>
          </div>
          <div class="mb-3">
            <label for="editUserDni" class="form-label">DNI</label>
            <input type="text" class="form-control" id="editUserDni" [(ngModel)]="selectedUser.dni" name="editDni" required>
          </div>
          <div class="mb-3">
            <label for="editUserEmail" class="form-label">Email</label>
            <input type="email" class="form-control" id="editUserEmail" [(ngModel)]="selectedUser.email" name="editEmail" required>
          </div>
          <div class="mb-3">
            <label for="editUserType" class="form-label">Tipo de Usuario</label>
            <select class="form-select" id="editUserType" [(ngModel)]="selectedUser.userType" name="editUserType" required>
              <option value="Client">Cliente</option>
              <option value="Mozo">Mozo</option>
              <option value="Admin">Administrador</option>
            </select>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button type="button" class="btn btn-primary" (click)="saveUpdatedUser()">Guardar cambios</button>
      </div>
    </div>
  </div>
</div>


    <!-- Orders Section -->
    <div *ngIf="activeSection === 'orders'" class="orders-section">
      <h1>Gestión de Pedidos</h1>
      
      <div class="section-actions">
        <div class="search-box">
          <input 
            type="text" 
            placeholder="Buscar pedidos..." 
            [(ngModel)]="orderSearchTerm"
            (input)="filterOrders()"
          >
        </div>
        
        <div class="filter-dropdown">
          <select [(ngModel)]="orderStatusFilter" (change)="filterOrders()">
            <option value="all">Todos los estados</option>
            <option value="Pending">Pendientes</option>
            <option value="Processing">En proceso</option>
            <option value="Completed">Completados</option>
            <option value="Cancelled">Cancelados</option>
          </select>
        </div>
      </div>
      
      <div class="table-container">
        <table>
          <thead>
            <tr>
              <th>ID</th>
              <th>Cliente</th>
              <th>Fecha</th>
              <th>Total</th>
              <th>Estado</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let cart of filteredCarts">
              <td>{{ cart.id }}</td>
              <td>{{ getUserFullName(cart.user) }}</td>
              <td>{{ cart.createdAt | date:'dd/MM/yyyy HH:mm' }}</td>
              <td>${{ cart.total }}</td>
              <td>
                <span class="status-badge" [class]="cart.state">
                  {{ cart.state }}
                </span>
              </td>
              <td class="actions-cell">
<button class="view-btn" title="Ver detalles"
        (click)="viewCartDetails(cart)"
        data-bs-toggle="modal"
        data-bs-target="#cartDetailsModal">
  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" 
       viewBox="0 0 24 24" fill="none" stroke="currentColor" 
       stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
    <circle cx="12" cy="12" r="3"></circle>
  </svg>
</button>

                <div class="dropdown">
                  <button class="status-btn" title="Cambiar estado">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M12 20h9"></path>
                      <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path>
                    </svg>
                  </button>
                  <div class="dropdown-menu">
                    <button class="dropdown-item" (click)="updateCartState(cart.id, 'Pending')">Pendiente</button>
                    <button class="dropdown-item" (click)="updateCartState(cart.id, 'Completed')">Completado</button>
                    <button class="dropdown-item" (click)="updateCartState(cart.id, 'Cancelled')">Cancelado</button>
                  </div>
                </div>
              </td>
            </tr>
            <tr *ngIf="filteredCarts.length === 0">
              <td colspan="6" class="no-data">No se encontraron pedidos</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
   <!-- Cart Details Modal -->
<div class="modal fade" id="cartDetailsModal" tabindex="-1" aria-labelledby="cartDetailsModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg"> 
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="cartDetailsModalLabel">Detalles del Carrito</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
      </div>
      <div class="modal-body" *ngIf="selectedCart && selectedCart.id">
        <p><strong>Estado:</strong> {{ selectedCart.state }}</p>
        <p><strong>Total:</strong> {{ selectedCart.total | currency:'ARS' }}</p>
        <p><strong>Tipo de entrega:</strong> {{ selectedCart.deliveryType }}</p>
        <p><strong>Nombre y Apellido:</strong> {{ selectedCart.user.firstName }} {{ selectedCart.user.lastName }}</p>
        <p><strong>Teléfono de contacto:</strong> {{ selectedCart.contactNumber }}</p>
        <p><strong>Dirección:</strong> {{ selectedCart.user.address }}</p>
        <p><strong>Fecha:</strong> {{ selectedCart.date | date:'dd/MM/yyyy HH:mm' }}</p>

        <h6 class="mt-3">Productos del pedido:</h6>
        <table class="table table-sm">
          <thead>
            <tr>
              <th>Producto</th>
              <th>Cantidad</th>
              <th>Total</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let order of selectedCart.orders">
              <td>{{ order.productName }}</td>
              <td>{{ order.quantity }}</td>
              <td>{{ order.subtotal | currency:'ARS' }}</td>
            </tr>
          </tbody>
        </table>

        <p class="text-end fw-bold">Total: {{ selectedCart.total | currency:'ARS' }}</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
      </div>
    </div>
  </div>
</div>
    <!-- Settings Section -->
    <div *ngIf="activeSection === 'settings'" class="settings-section">
      <h1>Configuración</h1>
      
      <div class="settings-card">
        <h2>Configuración General</h2>
        <form>
          <div class="form-group">
            <label>Nombre del Restaurante</label>
            <input type="text" value="Mi Restaurante">
          </div>
          
          <div class="form-group">
            <label>Dirección</label>
            <input type="text" value="Calle Principal 123">
          </div>
          
          <div class="form-group">
            <label>Teléfono</label>
            <input type="text" value="+123 456 7890">
          </div>
          
          <div class="form-group">
            <label>Email de Contacto</label>
            <input type="email" value="contacto@mirestaurante.com">
          </div>
          
          <div class="form-group">
            <label>Horario de Atención</label>
            <input type="text" value="Lun-Dom: 11:00 - 23:00">
          </div>
          
          <button type="submit" class="save-btn">Guardar Cambios</button>
        </form>
      </div>
      
      <div class="settings-card">
        <h2>Configuración de Impuestos</h2>
        <form>
          <div class="form-group">
            <label>Impuesto (IVA)</label>
            <div class="input-group">
              <input type="number" value="10">
              <span class="input-group-text">%</span>
            </div>
          </div>
          
          <div class="form-group">
            <label>Propina Sugerida</label>
            <div class="input-group">
              <input type="number" value="10">
              <span class="input-group-text">%</span>
            </div>
          </div>
          
          <button type="submit" class="save-btn">Guardar Cambios</button>
        </form>
      </div>
      
      <div class="settings-card">
        <h2>Cambiar Contraseña</h2>
        <form>
          <div class="form-group">
            <label>Contraseña Actual</label>
            <input type="password">
          </div>
          
          <div class="form-group">
            <label>Nueva Contraseña</label>
            <input type="password">
          </div>
          
          <div class="form-group">
            <label>Confirmar Contraseña</label>
            <input type="password">
          </div>
          
          <button type="submit" class="save-btn">Cambiar Contraseña</button>
        </form>
      </div>
    </div>
  </div>
</div>